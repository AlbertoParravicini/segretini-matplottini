from typing import Union

from matplotlib.colors import hsv_to_rgb, rgb_to_hsv, to_hex, to_rgb

# Define some colors for later use.
# Tool to create paletters: https://color.adobe.com/create
# Guide to make nice palettes: https://earthobservatory.nasa.gov/blogs/elegantfigures/2013/08/05/subtleties-of-color-part-1-of-6/
C1 = "#b1494a"
C2 = "#256482"
C3 = "#2f9C5a"
C4 = "#28464f"

R1 = "#FA4D4A"
R2 = "#FA3A51"
R3 = "#F41922"
R4 = "#CE1922"
R5 = "#F07B71"
R6 = "#F0A694"

B1 = "#97E6DB"
B2 = "#C6E6DB"
B3 = "#CEF0E4"
B4 = "#9CCFC4"
B5 = "#AEDBF2"
B6 = "#B0E6DB"
B7 = "#B6FCDA"
B8 = "#7bd490"

# Another blue-green palette;
BB0 = "#FFA685"
BB1 = "#75B0A2"
BB2 = "#CEF0E4"  # Same as B3;
BB3 = "#B6FCDA"  # Same as B7;
BB4 = "#7ED7B8"
BB5 = "#7BD490"

Y1 = "#FFA728"
Y2 = "#FF9642"
Y3 = "#FFAB69"
Y4 = "#E6D955"

PEACH1 = "#FF9868"
PEACH2 = "#fab086"

G1 = "#A2F2B1"
G2 = "#A5E6C6"

BT1 = "#55819E"
BT2 = "#538F6F"
BLUE_KLEIN = "#002fa7"

# Pastel-tint palette from dark blue to red;
PALETTE_1 = ["#4C9389", "#60b1b0", "#8fd4d4", "#9BD198", "#EFE8AC", "#f9af85", "#f59191"]

# Palette of green tones, light to dark;
PALETTE_G = ["#AEE69C", "#96DE9B", "#73BD8E", "#66B784", "#469E94", "#3A857C", "#34756E"]
PALETTE_G2 = ["#D5FFC7", "#9AE39F", "#73BD8E", "#5EA889", "#4F9E8C", "#3C8585"]
PALETTE_G3 = ["#E7F7DF", "#B5E8B5", "#71BD8A", "#469C7F", "#257A7A"]
# Palette of orange/yellow/brown tones;
PALETTE_O = ["#FDCE7C", "#EBB25E", "#E6A37C", "#FAB187", "#E3896F", "#E37E62", "#FD867C"]
# Palette with orange baseline + green tones;
PALETTE_OG = ["#E8CFB5", "#81C798", "#55A68B", "#358787"]

# Used for plots with a dark background;
BACKGROUND_BLACK = "#0E1117"


def extend_palette(palette: list[str], new_length: int) -> list[str]:
    """
    Replicate a palette (a list of colors) so that it matches the specified length

    :param palette: A list of colors.
    :param new_length: Desired palette length.
    :return: New extended palette.
    """
    return (palette * int(new_length / len(palette)))[:new_length]


def hex_color_to_grayscale(rgb: Union[str, tuple[int, int, int]]) -> str:
    """
    Convert a color expressed as RGB (either hex or tuple of 3 integers in [0, 255])
    into the corresponding grayscale color, by setting the saturation to 0.

    :param rgb: An input RGB color.
    :return: Output grayscale color, as hex.
    """
    hsv = rgb_to_hsv(to_rgb(rgb))
    hsv[1] = 0  # Set saturation to 0;
    return str(to_hex(hsv_to_rgb(hsv)))
